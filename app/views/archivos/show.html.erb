<!-- app/views/archivos/show.html.erb -->

<h1>Detalles del Archivo</h1>

<p><strong>Título:</strong> <%= @archivo.titulo %></p>
<p><strong>Descripción:</strong> <%= @archivo.descripcion %></p>
<p><strong>Notas:</strong> <%= @archivo.notas %></p>

<%= pie_chart @archivo.muestreos.group(:sexo).count %>
<%= pie_chart @archivo.muestreos.group(:origen).count %>

<!-- CSS de DataTables -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css">

<!-- JavaScript de jQuery (requisito para DataTables) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- JavaScript de DataTables -->
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>

<p style="color: green"›‹%%= notice %%></p>


<% if @muestreos.count == 0 %>
  <h1> No hay datos </h1>
<%else%>
    <h1>
      cantidad de muestreos:
      <%=@muestreos.count%>
    </h1>
    <h1>Lista de Muestreos</h1>
    <div class="table-responsive">
      <table id="tablaMuestreos" class="table table-striped table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Peso</th>
            <th>GDM</th>
            <th>Notas sobre el animal</th>
            <th>IDE</th>
            <th>Origen</th>
            <th>Sexo</th>
            <th>Tropa</th>
            <th>GDM total</th>
            <th>GPV</th>
            <th>GPV total</th>
            <th>Días</th>
            <th>Total de días</th>
            <th>Destino</th>
            <th>Fecha</th>
            <th>Hora</th>
            <th>archivo</th>
          </tr>
        </thead>
        <tbody>
          <% @muestreos.each do |muestreo| %>
            <tr>
              <td><%= muestreo.id %></td>
              <td><%= muestreo.peso %></td>
              <td><%= muestreo.gdm %></td>
              <td><%= muestreo.notas_sobre_el_animal %></td>
              <td><%= muestreo.ide %></td>
              <td><%= muestreo.origen %></td>
              <td><%= muestreo.sexo %></td>
              <td><%= muestreo.tropa %></td>
              <td><%= muestreo.gdm_total %></td>
              <td><%= muestreo.gpv %></td>
              <td><%= muestreo.gpv_total %></td>
              <td><%= muestreo.dias %></td>
              <td><%= muestreo.total_de_dias %></td>
              <td><%= muestreo.destino %></td>
              <td><%= muestreo.fecha %></td>
              <td><%= muestreo.hora.strftime("%H:%M")%></td>
              <td><%= muestreo.archivo_id %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
<%end%>


<script type="text/javascript">
  $(document).ready(function() {
    $('#tablaMuestreos').DataTable();
  });
</script>
